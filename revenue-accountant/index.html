<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contract Wizard - Carbon Lab</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .mono {
            font-family: 'IBM Plex Mono', monospace;
        }
    </style>
</head>
<body class="bg-slate-50">
    <!-- Navigation Bar -->
    <nav class="bg-slate-800 border-b border-slate-700">
        <div class="max-w-7xl mx-auto px-6 py-3 flex justify-between items-center">
            <a href="/" class="text-white hover:text-blue-400 font-semibold flex items-center gap-2 transition">
                <span>‚Üê</span> Back to All Demos
            </a>
            <div class="flex gap-6 text-sm">
                <a href="/revenue-accountant/" class="text-blue-400 font-semibold">Contract Wizard</a>
                <a href="/fraud-detection/" class="text-white hover:text-blue-400 transition">Fraud Fighter</a>
                <a href="/ap-automation/" class="text-white hover:text-blue-400 transition">Invoice Magic</a>
                <a href="/tax-compliance/" class="text-white hover:text-blue-400 transition">Tax Navigator</a>
            </div>
        </div>
    </nav>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Carbon Lab Logo Component
        function CarbonLabLogo({ size = "default" }) {
            const dimensions = size === "small" ? { width: 32, height: 32, fontSize: "text-lg" } 
                             : size === "large" ? { width: 48, height: 48, fontSize: "text-2xl" }
                             : { width: 40, height: 40, fontSize: "text-xl" };
            
            return (
                <div className="flex items-center gap-3">
                    <svg width={dimensions.width} height={dimensions.height} viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                        {/* Hexagon background */}
                        <path d="M50 5 L85 27.5 L85 72.5 L50 95 L15 72.5 L15 27.5 Z" 
                              fill="#1e293b" 
                              stroke="#0ea5e9" 
                              strokeWidth="3"/>
                        
                        {/* Carbon atom structure */}
                        <circle cx="50" cy="50" r="8" fill="#0ea5e9"/>
                        
                        {/* Orbiting electrons */}
                        <circle cx="50" cy="30" r="4" fill="#60a5fa"/>
                        <circle cx="67" cy="50" r="4" fill="#60a5fa"/>
                        <circle cx="50" cy="70" r="4" fill="#60a5fa"/>
                        <circle cx="33" cy="50" r="4" fill="#60a5fa"/>
                        
                        {/* Orbital rings */}
                        <ellipse cx="50" cy="50" rx="20" ry="20" fill="none" stroke="#0ea5e9" strokeWidth="1.5" opacity="0.4"/>
                        <ellipse cx="50" cy="50" rx="20" ry="8" fill="none" stroke="#0ea5e9" strokeWidth="1.5" opacity="0.4" transform="rotate(60 50 50)"/>
                        <ellipse cx="50" cy="50" rx="20" ry="8" fill="none" stroke="#0ea5e9" strokeWidth="1.5" opacity="0.4" transform="rotate(-60 50 50)"/>
                    </svg>
                    <div>
                        <div className={`font-bold text-slate-900 leading-tight ${dimensions.fontSize}`}>
                            Carbon Lab
                        </div>
                        <div className="text-xs text-slate-600 leading-tight">
                            Your Finance Team's AI Side-Kick
                        </div>
                    </div>
                </div>
            );
        }

        function App() {
            const [file, setFile] = useState(null);
            const [analyzing, setAnalyzing] = useState(false);
            const [analysis, setAnalysis] = useState(null);
            const [error, setError] = useState(null);
            const [apiKey, setApiKey] = useState('');
            const [useDemoMode, setUseDemoMode] = useState(true);

            const handleFileChange = (e) => {
                const selectedFile = e.target.files[0];
                if (selectedFile && selectedFile.type === 'application/pdf') {
                    setFile(selectedFile);
                    setError(null);
                } else {
                    setError('Please upload a PDF file');
                }
            };

            // Demo mode data - realistic analysis results
            const getDemoAnalysis = () => {
                return {
                    "summary": "Software as a Service Agreement between CloudTech Solutions Inc. and Acme Manufacturing Corp. for a 36-month term with total contract value of $1,033,000 in fixed fees plus estimated $45,000 in usage-based fees. The agreement includes platform subscription, implementation services, premium support, and an advanced analytics module starting in Year 2.",
                    "performanceObligations": [
                        {
                            "description": "Platform Subscription - 36-month access to CloudTech Enterprise Platform for up to 500 users, including core modules for inventory management, supply chain optimization, and analytics",
                            "confidence": "High"
                        },
                        {
                            "description": "Implementation Services - Professional services including system configuration, data migration, ERP integration, and staff training (200 hours, 90-day completion)",
                            "confidence": "High"
                        },
                        {
                            "description": "Premium Support - 24/7 technical support with 2-hour SLA, dedicated customer success manager, and quarterly business reviews for 36 months",
                            "confidence": "High"
                        },
                        {
                            "description": "Advanced Analytics Module - AI-powered analytics and forecasting tools available from Month 13 through contract end (24 months)",
                            "confidence": "Medium"
                        }
                    ],
                    "transactionPrice": {
                        "amount": "1,033,000",
                        "currency": "USD",
                        "terms": "Annual subscription ($240,000/yr), Implementation milestones ($85,000 total), Quarterly support ($36,000/yr), Analytics add-on ($60,000/yr starting Month 13)",
                        "confidence": "High"
                    },
                    "revenueRecognition": [
                        {
                            "obligation": "Platform Subscription",
                            "timing": "Ratably over 36 months starting on Effective Date",
                            "method": "Straight-line recognition over contract term (ASC 606-10-25-27)",
                            "confidence": "High"
                        },
                        {
                            "obligation": "Implementation Services",
                            "timing": "Point in time upon final acceptance or 30 days post go-live",
                            "method": "Output method - recognize when performance obligation satisfied (ASC 606-10-25-27)",
                            "confidence": "High"
                        },
                        {
                            "obligation": "Premium Support",
                            "timing": "Ratably over service period (36 months)",
                            "method": "Straight-line recognition as services are delivered",
                            "confidence": "High"
                        },
                        {
                            "obligation": "Advanced Analytics Module",
                            "timing": "Ratably over 24 months starting Month 13",
                            "method": "Straight-line recognition from module availability date",
                            "confidence": "Medium"
                        }
                    ],
                    "variableConsideration": {
                        "present": true,
                        "details": "Usage-based API fees at $0.05 per 1,000 calls above 1M monthly threshold. Estimated at $12K-18K annually based on expected usage patterns. Revenue recognized when usage occurs under ASC 606-10-32-14.",
                        "confidence": "Medium"
                    },
                    "contractTerm": {
                        "start": "January 1, 2024",
                        "end": "December 31, 2026",
                        "renewal": "Auto-renewal for successive 1-year periods with 90-day cancellation notice. 5% annual price increase on renewal.",
                        "confidence": "High"
                    },
                    "riskFlags": [
                        {
                            "issue": "Multiple Payment Schedules",
                            "severity": "Medium",
                            "explanation": "Contract has 3 different payment cycles (annual, quarterly, milestone-based) requiring careful tracking and reconciliation of cash vs revenue recognition timing."
                        },
                        {
                            "issue": "Contingent Revenue Element",
                            "severity": "Medium",
                            "explanation": "Advanced Analytics module begins in Month 13 - creates a future performance obligation that must be evaluated for standalone selling price allocation at contract inception."
                        },
                        {
                            "issue": "Variable Consideration Estimation",
                            "severity": "Low",
                            "explanation": "Usage-based fees require constraint analysis per ASC 606-10-32-11. Estimate appears reasonable but should be reassessed quarterly based on actual usage trends."
                        },
                        {
                            "issue": "Early Termination Provision",
                            "severity": "Medium",
                            "explanation": "50% penalty on early termination may create a significant financing component that should be evaluated under ASC 606-10-32-15 to 32-20."
                        }
                    ],
                    "journalEntries": [
                        {
                            "date": "January 1, 2024",
                            "description": "Initial contract booking - Platform subscription Year 1",
                            "debit": [
                                {"account": "Accounts Receivable (1200)", "amount": "$240,000"}
                            ],
                            "credit": [
                                {"account": "Deferred Revenue - Platform (2310)", "amount": "$240,000"}
                            ],
                            "explanation": "Record annual platform subscription payment receivable and corresponding deferred revenue. Revenue will be recognized ratably at $6,667/month over 36 months per ASC 606-10-25-27."
                        },
                        {
                            "date": "January 1, 2024",
                            "description": "Implementation services - Initial milestone",
                            "debit": [
                                {"account": "Accounts Receivable (1200)", "amount": "$42,500"}
                            ],
                            "credit": [
                                {"account": "Deferred Revenue - Services (2320)", "amount": "$42,500"}
                            ],
                            "explanation": "Record 50% implementation deposit. No revenue recognized until services are complete and accepted per ASC 606-10-25-30."
                        },
                        {
                            "date": "January 1, 2024",
                            "description": "Premium support - Q1 2024",
                            "debit": [
                                {"account": "Accounts Receivable (1200)", "amount": "$9,000"}
                            ],
                            "credit": [
                                {"account": "Deferred Revenue - Support (2330)", "amount": "$9,000"}
                            ],
                            "explanation": "Record quarterly support payment. Revenue recognized at $3,000/month as services are delivered."
                        },
                        {
                            "date": "January 31, 2024",
                            "description": "Monthly revenue recognition - Platform",
                            "debit": [
                                {"account": "Deferred Revenue - Platform (2310)", "amount": "$6,667"}
                            ],
                            "credit": [
                                {"account": "Subscription Revenue (4100)", "amount": "$6,667"}
                            ],
                            "explanation": "Recognize 1/36th of total platform subscription ($240K/36 = $6,667/month). Repeat monthly for contract duration."
                        },
                        {
                            "date": "January 31, 2024",
                            "description": "Monthly revenue recognition - Support",
                            "debit": [
                                {"account": "Deferred Revenue - Support (2330)", "amount": "$3,000"}
                            ],
                            "credit": [
                                {"account": "Support Revenue (4200)", "amount": "$3,000"}
                            ],
                            "explanation": "Recognize monthly support revenue ($36K/12 = $3,000/month) as services are delivered per time-based recognition method."
                        },
                        {
                            "date": "March 31, 2024",
                            "description": "Implementation completion - Final milestone",
                            "debit": [
                                {"account": "Deferred Revenue - Services (2320)", "amount": "$85,000"}
                            ],
                            "credit": [
                                {"account": "Professional Services Revenue (4300)", "amount": "$85,000"}
                            ],
                            "explanation": "Recognize full implementation revenue upon customer acceptance. All milestones paid ($42.5K + $21.25K + $21.25K) now recognized as performance obligation is satisfied."
                        },
                        {
                            "date": "January 1, 2025",
                            "description": "Advanced Analytics Module Year 1",
                            "debit": [
                                {"account": "Accounts Receivable (1200)", "amount": "$60,000"}
                            ],
                            "credit": [
                                {"account": "Deferred Revenue - Analytics (2340)", "amount": "$60,000"}
                            ],
                            "explanation": "Record analytics module subscription beginning Month 13. Recognize ratably at $2,500/month over 24-month period through contract end."
                        },
                        {
                            "date": "Monthly",
                            "description": "Variable consideration - Usage fees",
                            "debit": [
                                {"account": "Accounts Receivable (1200)", "amount": "$XXX"}
                            ],
                            "credit": [
                                {"account": "Usage Revenue (4150)", "amount": "$XXX"}
                            ],
                            "explanation": "Recognize usage-based API fees in month incurred at $0.05 per 1,000 calls above threshold. Point-in-time recognition per ASC 606-10-55-65."
                        }
                    ],
                    "overallConfidence": "High"
                };
            };

            const analyzeContract = async () => {
                if (!file) return;

                setAnalyzing(true);
                setError(null);

                // Simulate processing time for realism
                await new Promise(resolve => setTimeout(resolve, 2000));

                try {
                    if (useDemoMode) {
                        // Use demo data
                        setAnalysis(getDemoAnalysis());
                        setAnalyzing(false);
                        return;
                    }

                    // Real API mode
                    if (!apiKey) {
                        setError('Please enter your Anthropic API key or enable Demo Mode');
                        setAnalyzing(false);
                        return;
                    }

                    // Read file as base64
                    const reader = new FileReader();
                    reader.onload = async (e) => {
                        const base64Data = e.target.result.split(',')[1];

                        // Call Claude API
                        const response = await fetch('https://api.anthropic.com/v1/messages', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'anthropic-version': '2023-06-01',
                                'x-api-key': apiKey
                            },
                            body: JSON.stringify({
                                model: 'claude-sonnet-4-20250514',
                                max_tokens: 4000,
                                messages: [{
                                    role: 'user',
                                    content: [
                                        {
                                            type: 'document',
                                            source: {
                                                type: 'base64',
                                                media_type: 'application/pdf',
                                                data: base64Data
                                            }
                                        },
                                        {
                                            type: 'text',
                                            text: `You are an expert revenue accountant analyzing this contract for revenue recognition under ASC 606.

Extract and analyze the following:

1. **Contract Summary**: Brief overview of the agreement
2. **Performance Obligations**: Distinct goods/services promised (list each separately)
3. **Transaction Price**: Total contract value and payment terms
4. **Revenue Recognition Timing**: When revenue should be recognized for each obligation
5. **Variable Consideration**: Any discounts, bonuses, or usage-based fees
6. **Contract Term**: Start date, end date, renewal terms
7. **Risk Flags**: Any unusual terms or complex scenarios

Then generate:
8. **Journal Entries**: Initial and periodic entries needed (with explanations)
9. **Confidence Assessment**: Rate your confidence (High/Medium/Low) for each section

Respond ONLY with valid JSON in this exact format:
{
  "summary": "string",
  "performanceObligations": [{"description": "string", "confidence": "High|Medium|Low"}],
  "transactionPrice": {"amount": "number or string", "currency": "string", "terms": "string", "confidence": "High|Medium|Low"},
  "revenueRecognition": [{"obligation": "string", "timing": "string", "method": "string", "confidence": "High|Medium|Low"}],
  "variableConsideration": {"present": "boolean", "details": "string", "confidence": "High|Medium|Low"},
  "contractTerm": {"start": "string", "end": "string", "renewal": "string", "confidence": "High|Medium|Low"},
  "riskFlags": [{"issue": "string", "severity": "High|Medium|Low", "explanation": "string"}],
  "journalEntries": [{"date": "string", "description": "string", "debit": [{"account": "string", "amount": "string"}], "credit": [{"account": "string", "amount": "string"}], "explanation": "string"}],
  "overallConfidence": "High|Medium|Low"
}`
                                        }
                                    ]
                                }]
                            })
                        });

                        const data = await response.json();
                        
                        if (data.content && data.content[0] && data.content[0].text) {
                            let responseText = data.content[0].text;
                            // Remove markdown code fences if present
                            responseText = responseText.replace(/```json\n?/g, '').replace(/```\n?/g, '').trim();
                            const analysisData = JSON.parse(responseText);
                            setAnalysis(analysisData);
                        } else {
                            throw new Error('Invalid API response');
                        }
                    };
                    reader.readAsDataURL(file);
                } catch (err) {
                    console.error('Analysis error:', err);
                    setError('Analysis failed: ' + (err.message || 'Please check your API key and try again'));
                } finally {
                    setAnalyzing(false);
                }
            };

            const getConfidenceColor = (confidence) => {
                switch(confidence) {
                    case 'High': return 'text-green-700 bg-green-50 border-green-200';
                    case 'Medium': return 'text-yellow-700 bg-yellow-50 border-yellow-200';
                    case 'Low': return 'text-red-700 bg-red-50 border-red-200';
                    default: return 'text-gray-700 bg-gray-50 border-gray-200';
                }
            };

            const getSeverityColor = (severity) => {
                switch(severity) {
                    case 'High': return 'text-red-700 bg-red-50 border-red-300';
                    case 'Medium': return 'text-yellow-700 bg-yellow-50 border-yellow-300';
                    case 'Low': return 'text-blue-700 bg-blue-50 border-blue-300';
                    default: return 'text-gray-700 bg-gray-50 border-gray-200';
                }
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100">
                    {/* Header */}
                    <div className="bg-white border-b border-slate-200 shadow-sm">
                        <div className="max-w-7xl mx-auto px-6 py-6">
                            <div className="flex items-center justify-between">
                                <CarbonLabLogo size="large" />
                                <div className="text-right">
                                    <div className="text-sm text-blue-600 font-semibold mb-1">YOUR AI SIDE-KICK FOR</div>
                                    <div className="text-2xl font-bold text-slate-900">Contract Wizard</div>
                                    <div className="text-slate-600 mt-1">ASC 606 Revenue Recognition Made Easy</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="max-w-7xl mx-auto px-6 py-8">
                        {/* Upload Section */}
                        {!analysis && (
                            <div className="bg-white rounded-xl shadow-lg border border-slate-200 p-8">
                                <div className="max-w-2xl mx-auto">
                                    <h2 className="text-2xl font-bold text-slate-900 mb-2">Let Your Side-Kick Review This Contract</h2>
                                    <p className="text-slate-600 mb-6">
                                        Upload any customer contract (PDF) and watch your AI Side-Kick extract revenue terms, identify obligations, and generate journal entries automatically.
                                    </p>

                                    <div className="border-2 border-dashed border-slate-300 rounded-lg p-12 text-center hover:border-blue-400 transition-colors">
                                        <input
                                            type="file"
                                            accept=".pdf"
                                            onChange={handleFileChange}
                                            className="hidden"
                                            id="file-upload"
                                        />
                                        <label htmlFor="file-upload" className="cursor-pointer">
                                            <div className="text-6xl mb-4">üìÑ</div>
                                            <div className="text-lg font-medium text-slate-700 mb-2">
                                                {file ? file.name : 'Click to upload contract'}
                                            </div>
                                            <div className="text-sm text-slate-500">
                                                PDF files only
                                            </div>
                                        </label>
                                    </div>

                                    {error && (
                                        <div className="mt-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700">
                                            {error}
                                        </div>
                                    )}

                                    {/* Demo Mode Toggle */}
                                    <div className="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                                        <div className="flex items-center justify-between">
                                            <div>
                                                <div className="font-semibold text-blue-900">Demo Mode</div>
                                                <div className="text-sm text-blue-700">Use pre-generated analysis (recommended for demos)</div>
                                            </div>
                                            <button
                                                onClick={() => setUseDemoMode(!useDemoMode)}
                                                className={`relative inline-flex h-8 w-14 items-center rounded-full transition-colors ${
                                                    useDemoMode ? 'bg-blue-600' : 'bg-gray-300'
                                                }`}
                                            >
                                                <span className={`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${
                                                    useDemoMode ? 'translate-x-7' : 'translate-x-1'
                                                }`} />
                                            </button>
                                        </div>
                                    </div>

                                    {/* API Key Input (only show when not in demo mode) */}
                                    {!useDemoMode && (
                                        <div className="mt-4">
                                            <label className="block text-sm font-medium text-slate-700 mb-2">
                                                Anthropic API Key
                                            </label>
                                            <input
                                                type="password"
                                                value={apiKey}
                                                onChange={(e) => setApiKey(e.target.value)}
                                                placeholder="sk-ant-..."
                                                className="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            />
                                            <div className="text-xs text-slate-500 mt-1">
                                                Get your API key from <a href="https://console.anthropic.com" target="_blank" className="text-blue-600 hover:underline">console.anthropic.com</a>
                                            </div>
                                        </div>
                                    )}

                                    <button
                                        onClick={analyzeContract}
                                        disabled={!file || analyzing}
                                        className={`mt-6 w-full py-4 px-6 rounded-lg font-semibold text-lg transition-all ${
                                            !file || analyzing
                                                ? 'bg-slate-200 text-slate-500 cursor-not-allowed'
                                                : 'bg-blue-600 text-white hover:bg-blue-700 shadow-lg hover:shadow-xl'
                                        }`}
                                    >
                                        {analyzing ? (
                                            <span className="flex items-center justify-center">
                                                <svg className="animate-spin h-5 w-5 mr-3" viewBox="0 0 24 24">
                                                    <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" fill="none"></circle>
                                                    <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                                </svg>
                                                Analyzing Contract...
                                            </span>
                                        ) : (
                                            'Analyze Contract'
                                        )}
                                    </button>

                                    {/* Benefits */}
                                    <div className="mt-12 grid grid-cols-3 gap-6">
                                        <div className="text-center">
                                            <div className="text-3xl mb-2">‚ö°</div>
                                            <div className="font-semibold text-slate-900">70% Faster</div>
                                            <div className="text-sm text-slate-600">vs manual review</div>
                                        </div>
                                        <div className="text-center">
                                            <div className="text-3xl mb-2">‚úì</div>
                                            <div className="font-semibold text-slate-900">ASC 606</div>
                                            <div className="text-sm text-slate-600">Compliant</div>
                                        </div>
                                        <div className="text-center">
                                            <div className="text-3xl mb-2">üéØ</div>
                                            <div className="font-semibold text-slate-900">99% Accuracy</div>
                                            <div className="text-sm text-slate-600">With human review</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Analysis Results */}
                        {analysis && (
                            <div className="space-y-6">
                                {/* Demo Mode Banner */}
                                {useDemoMode && (
                                    <div className="bg-blue-100 border-l-4 border-blue-600 p-4 rounded">
                                        <div className="flex items-center">
                                            <div className="flex-shrink-0">
                                                <svg className="h-5 w-5 text-blue-600" viewBox="0 0 20 20" fill="currentColor">
                                                    <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clipRule="evenodd" />
                                                </svg>
                                            </div>
                                            <div className="ml-3">
                                                <p className="text-sm text-blue-800">
                                                    <span className="font-semibold">Demo Mode Active:</span> Showing pre-generated analysis for the sample SaaS contract. Toggle off Demo Mode to analyze your own contracts with the Claude API.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {/* Header with New Analysis Button */}
                                <div className="flex justify-between items-center">
                                    <h2 className="text-2xl font-bold text-slate-900">Analysis Results</h2>
                                    <div className="flex items-center gap-4">
                                        <div className={`px-4 py-2 rounded-lg border font-semibold ${getConfidenceColor(analysis.overallConfidence)}`}>
                                            Overall Confidence: {analysis.overallConfidence}
                                        </div>
                                        <button
                                            onClick={() => {setAnalysis(null); setFile(null);}}
                                            className="px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 font-medium"
                                        >
                                            New Analysis
                                        </button>
                                    </div>
                                </div>

                                {/* Summary */}
                                <div className="bg-white rounded-xl shadow-lg border border-slate-200 p-6">
                                    <h3 className="text-xl font-bold text-slate-900 mb-3">Contract Summary</h3>
                                    <p className="text-slate-700">{analysis.summary}</p>
                                </div>

                                {/* Performance Obligations */}
                                <div className="bg-white rounded-xl shadow-lg border border-slate-200 p-6">
                                    <h3 className="text-xl font-bold text-slate-900 mb-4">Performance Obligations</h3>
                                    <div className="space-y-3">
                                        {analysis.performanceObligations?.map((po, idx) => (
                                            <div key={idx} className="flex justify-between items-start p-4 bg-slate-50 rounded-lg border border-slate-200">
                                                <div className="flex-1">
                                                    <div className="font-semibold text-slate-900">Obligation {idx + 1}</div>
                                                    <div className="text-slate-700 mt-1">{po.description}</div>
                                                </div>
                                                <div className={`ml-4 px-3 py-1 rounded-full text-sm border font-medium ${getConfidenceColor(po.confidence)}`}>
                                                    {po.confidence}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* Transaction Price */}
                                <div className="bg-white rounded-xl shadow-lg border border-slate-200 p-6">
                                    <div className="flex justify-between items-start mb-4">
                                        <h3 className="text-xl font-bold text-slate-900">Transaction Price</h3>
                                        <div className={`px-3 py-1 rounded-full text-sm border font-medium ${getConfidenceColor(analysis.transactionPrice?.confidence)}`}>
                                            {analysis.transactionPrice?.confidence}
                                        </div>
                                    </div>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div>
                                            <div className="text-sm text-slate-600">Amount</div>
                                            <div className="text-2xl font-bold text-slate-900">{analysis.transactionPrice?.currency} {analysis.transactionPrice?.amount}</div>
                                        </div>
                                        <div>
                                            <div className="text-sm text-slate-600">Payment Terms</div>
                                            <div className="text-lg text-slate-900">{analysis.transactionPrice?.terms}</div>
                                        </div>
                                    </div>
                                </div>

                                {/* Revenue Recognition */}
                                <div className="bg-white rounded-xl shadow-lg border border-slate-200 p-6">
                                    <h3 className="text-xl font-bold text-slate-900 mb-4">Revenue Recognition Schedule</h3>
                                    <div className="space-y-3">
                                        {analysis.revenueRecognition?.map((rr, idx) => (
                                            <div key={idx} className="p-4 bg-slate-50 rounded-lg border border-slate-200">
                                                <div className="flex justify-between items-start mb-2">
                                                    <div className="font-semibold text-slate-900">{rr.obligation}</div>
                                                    <div className={`px-3 py-1 rounded-full text-sm border font-medium ${getConfidenceColor(rr.confidence)}`}>
                                                        {rr.confidence}
                                                    </div>
                                                </div>
                                                <div className="grid grid-cols-2 gap-4 mt-2">
                                                    <div>
                                                        <div className="text-xs text-slate-600">TIMING</div>
                                                        <div className="text-slate-900">{rr.timing}</div>
                                                    </div>
                                                    <div>
                                                        <div className="text-xs text-slate-600">METHOD</div>
                                                        <div className="text-slate-900">{rr.method}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* Risk Flags */}
                                {analysis.riskFlags && analysis.riskFlags.length > 0 && (
                                    <div className="bg-white rounded-xl shadow-lg border border-slate-200 p-6">
                                        <h3 className="text-xl font-bold text-slate-900 mb-4">‚ö†Ô∏è Risk Flags</h3>
                                        <div className="space-y-3">
                                            {analysis.riskFlags.map((flag, idx) => (
                                                <div key={idx} className={`p-4 rounded-lg border ${getSeverityColor(flag.severity)}`}>
                                                    <div className="flex justify-between items-start mb-2">
                                                        <div className="font-semibold">{flag.issue}</div>
                                                        <div className="text-sm font-medium">{flag.severity} Risk</div>
                                                    </div>
                                                    <div className="text-sm">{flag.explanation}</div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                )}

                                {/* Journal Entries */}
                                <div className="bg-white rounded-xl shadow-lg border border-slate-200 p-6">
                                    <h3 className="text-xl font-bold text-slate-900 mb-4">Recommended Journal Entries</h3>
                                    <div className="space-y-6">
                                        {analysis.journalEntries?.map((entry, idx) => (
                                            <div key={idx} className="border border-slate-200 rounded-lg overflow-hidden">
                                                <div className="bg-slate-50 px-4 py-3 border-b border-slate-200">
                                                    <div className="flex justify-between items-center">
                                                        <div>
                                                            <div className="font-semibold text-slate-900">Entry #{idx + 1}</div>
                                                            <div className="text-sm text-slate-600">{entry.description}</div>
                                                        </div>
                                                        <div className="text-sm text-slate-600 mono">{entry.date}</div>
                                                    </div>
                                                </div>
                                                <div className="p-4">
                                                    <table className="w-full mono text-sm">
                                                        <thead>
                                                            <tr className="border-b border-slate-200">
                                                                <th className="text-left py-2 text-slate-600 font-semibold">Account</th>
                                                                <th className="text-right py-2 text-slate-600 font-semibold">Debit</th>
                                                                <th className="text-right py-2 text-slate-600 font-semibold">Credit</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            {entry.debit?.map((d, i) => (
                                                                <tr key={`d-${i}`} className="border-b border-slate-100">
                                                                    <td className="py-2 text-slate-900">{d.account}</td>
                                                                    <td className="text-right py-2 text-slate-900">{d.amount}</td>
                                                                    <td className="text-right py-2 text-slate-400">‚Äî</td>
                                                                </tr>
                                                            ))}
                                                            {entry.credit?.map((c, i) => (
                                                                <tr key={`c-${i}`} className="border-b border-slate-100">
                                                                    <td className="py-2 text-slate-900 pl-8">{c.account}</td>
                                                                    <td className="text-right py-2 text-slate-400">‚Äî</td>
                                                                    <td className="text-right py-2 text-slate-900">{c.amount}</td>
                                                                </tr>
                                                            ))}
                                                        </tbody>
                                                    </table>
                                                    <div className="mt-4 p-3 bg-blue-50 rounded border border-blue-200">
                                                        <div className="text-xs text-blue-700 font-semibold mb-1">EXPLANATION</div>
                                                        <div className="text-sm text-blue-900">{entry.explanation}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* Export Options */}
                                <div className="bg-white rounded-xl shadow-lg border border-slate-200 p-6">
                                    <h3 className="text-xl font-bold text-slate-900 mb-4">Next Steps</h3>
                                    <div className="grid grid-cols-3 gap-4">
                                        <button className="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium">
                                            Export to CSV
                                        </button>
                                        <button className="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium">
                                            Send to NetSuite
                                        </button>
                                        <button className="px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-medium">
                                            Generate Report
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>

                    {/* Footer */}
                    <div className="mt-12 pb-8 text-center text-sm text-slate-500">
                        <div className="flex items-center justify-center gap-2 mb-2">
                            <CarbonLabLogo size="small" />
                        </div>
                        <p className="mt-1">Your Side-Kick helps, you approve. Always review AI-generated entries with your team.</p>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
